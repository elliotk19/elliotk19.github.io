<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog &middot; Elliot's Data Science Portfolio
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/img/smile.png">
  <link rel="shortcut icon" href="/public/img/smile.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <a href="http://gravatar.com/3447a97633c3d1f380ce7d703e9100a5">
          <img src="http://www.gravatar.com/avatar/3447a97633c3d1f380ce7d703e9100a5?s=350" title="View on Gravatar" alt="View on Gravatar" />
        </a>
      </div>
      <div class="sidebar-personal-info-section">
        <p><b>Data is the new oil?
 No: Data is the new soil</b></p>
      </div>
      
      
      
      <div class="sidebar-personal-info-section">
        <p> Follow me: 
        
        
        
        <a href="https://github.com/elliotk19">
          <i class="fa fa-github" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="https://fb.com/elliotk19">
          <i class="fa fa-facebook" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="https://instagram.com/elliot.kim1231">
          <i class="fa fa-instagram" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="mailto:elliotkim1230@gmail.com">
          <i class="fa fa-envelope" aria-hidden="true"></i>
        </a>
        
        
        
        </p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item active" href="/blog/">
          Posts
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/about/">
          About me
        </a>

        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="http://github.com/elliotk19">
          Github Project
        </a>

        
      </span>

    

    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

  <div class="sidebar-item">
    <p>
    &copy; 2018 Elliot Kim. This work is liscensed under <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a>.
    </p>
  </div>

  <div class="sidebar-item">
    <p>
    Powered by <a href="http://jekyllrb.com">jekyll</a>
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home" title="Elliot's Data Science Portfolio">
              <img class="masthead-logo" src="/public/python_logo.png"/>
            </a>
            <small>Python & Data Analysis</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/summer%20camp/2018/08/01/Final-Project-Code/">
        Using Principal Component Analysis (PCA) Final(Methods, Code, Analysis/Conclusion, and Future Directions):The Human Microbiome Dataset
      </a>
    </h1>

    <span class="post-date">01 Aug 2018</span>
     | 
    
    <a href="/blog/tags/#cosmos" class="post-tag">COSMOS</a>
    
    <a href="/blog/tags/#final-project" class="post-tag">Final Project</a>
    
    <a href="/blog/tags/#camp" class="post-tag">Camp</a>
    
    

    <article>
      <p>After doing all the research needed for the project, our group now proceeded on the coding part of the project. Unlike the past two datasets I analyzed using PCA, for this specific dataset, I conducted a PCA within a PCA so that I can classify the specific regions from its general locations. So now let’s look into the code in which I classified the code in terms of its purpose.</p>
<h2>Creating the Base PCA Solver </h2>
<h5>Importing Libraries </h5>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>To start the code, I imported the necessary libraries needed to perform the PCA. So I imported 4 main libraries: pandas, numpy, matplotlib, and sklearn. Pandas is mainly used to organize data structures so that one can view certain data in various persepctives. Numpy is mainly used for any type of calculations or math related since it can perform basically any types of mathematical functions. Matplotlib is mainly used to visualize a certain dataset so that one can physically see the results of a certain situation. Finally, I imported the StandardScaler and the PCA from sklearn.decomposition because these are the necessary components of PCA humans cannot physically do by hand yet only computers can handle.</p>
<h5>Loading and Processing the Dataset </h5>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">dataF</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">'otu_table_psn_v13_annotated_total.xlsx'</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">dataF</span> <span class="o">=</span> <span class="n">dataF</span><span class="o">.</span><span class="n">T</span>
<span class="n">features</span> <span class="o">=</span> <span class="n">dataF</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">:]</span><span class="o">.</span><span class="n">values</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">dataF</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">regionlabel</span> <span class="o">=</span> <span class="n">dataF</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">specificregion</span> <span class="o">=</span> <span class="n">dataF</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>In this part of the code, I created a pandas dataframe by loading the data as an excel file. In the parameters of the read_excel function, it includes the parameter header in which equalled None.
<img src="/public/img/microexcel.png" alt="Image" />
The reason I set the header to None is because on the next line, I processed my dataframe so that it becomes the transpose of itself which basically means that the x and y axis switched. As shown in the picture above, taking the transpose of the dataset would follow our information section in that the independent variable would become the gender and the region the sample was taken and the dependent variable being different OTUs. Next, I split the dataframe to 4 different sub-dataframes called features, labels, regionlabel, and specificregion and the data contained in each of the dataframes are self-explanatory by their names.</p>
<h5>PCA Solver </h5>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">numEvec</span><span class="o">=</span><span class="mi">8</span>
<span class="k">def</span> <span class="nf">PCASolver</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">numEvec</span><span class="p">):</span>
    <span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span> <span class="n">numEvec</span><span class="p">)</span>
    <span class="n">Y</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Y</span><span class="p">,</span> <span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span>
<span class="n">Y</span><span class="p">,</span> <span class="n">all_eigvalues</span> <span class="o">=</span> <span class="n">PCASolver</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">numEvec</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>So the next part of the code deals with creating the base PCA Solver in which takes in the features dataframe and the number of principal components (numEvec) it will analyze. As this function runs, it runs PCA from the library we imported and also standardizes the matrix into the dataframe Y. Thus this specific function outputs the standardized dataframe Y and a list with all the explained varaince ratio of each principal component. What the explained variance can tell you about a principal component is that it shows what percent of the variance of the data each principal component explains.</p>
<h3>Creating the Variance Plot </h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="n">numPCs</span> <span class="o">=</span> <span class="n">numEvec</span>
<span class="n">percent</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">100</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_eigvalues</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)]</span>
<span class="n">cum_var_exp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">percent</span><span class="p">[:</span><span class="n">numPCs</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numPCs</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">cum_var_exp</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">'r'</span><span class="p">,</span><span class="n">marker</span><span class="o">=</span><span class="s">'s'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numPCs</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">percent</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'Cumulative Explained Variance'</span><span class="p">,</span><span class="s">'Eigenvalue'</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Explained Variance by Different Principle Components'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>As we ran the PCA solver with the raw dataset, we were able to generate a list called all_eigvalues with the explained variance ratio of each of the eigenvalues. So the next thing I did was to create another list called percent in which multiplied the ratio by 100 so that we can get the percentage as I ordered the percentages in descending order. By organizing the dataset from greatest to least, it would therefore categorize the principal components from the most important to the least important.
<img src="/public/img/explainedvariance.png" alt="Image" />
This is the plot we get after running all the commands using the matplotlib library. Basically I created a plot and inside it created bar graphs that signified the explained variance in percent of each of the principal components from the most significant to the least. Also on the plot is a line graph that shows the cumulative explained variance in which shows the sum of the explained variance from pc1~pc(n). Normally, when using PCA and dealing with explained variance, data scientists would use the number of principal components that takes to explain at least 70% of the data. In this case, as shown by the graph the first four principal components represents approximately 70% of the data and we chose to analyze these four principal components.</p>
<h3>PCA Amongst the General Regions </h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="n">n</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">stri</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">stri</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'PC'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>    
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>        
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'2 component PCA'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>        
        <span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Urogenital_tract'</span><span class="p">,</span> <span class="s">'Airways'</span><span class="p">,</span> <span class="s">'Skin'</span><span class="p">,</span> <span class="s">'Oral'</span><span class="p">,</span> <span class="s">'Gastrointestinal_tract'</span><span class="p">]</span>
<span class="c">#         targets = ['Urogenital_tract', 'Airways','Gastrointestinal_tract']</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">'r'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'m'</span><span class="p">]</span>        
        <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span><span class="n">colors</span><span class="p">):</span>
            <span class="n">indicesToKeep</span> <span class="o">=</span> <span class="n">regionlabel</span> <span class="o">==</span> <span class="n">target</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">Y</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span><span class="n">i</span><span class="p">]</span>
                       <span class="p">,</span> <span class="n">Y</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span><span class="n">j</span><span class="p">]</span>
                       <span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span>
                       <span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

    <article>
    <div class="post-more">
      
      <a href="/summer%20camp/2018/08/01/Final-Project-Code/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/summer%20camp/2018/08/01/Final-Project-Code/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/summer%20camp/2018/07/29/Final-Project-Using-PCA/">
        Using Principal Component Analysis (PCA) Final(Abstract,Question, Variables and Hypothesis, and Background):The Human Microbiome Dataset
      </a>
    </h1>

    <span class="post-date">29 Jul 2018</span>
     | 
    
    <a href="/blog/tags/#cosmos" class="post-tag">COSMOS</a>
    
    <a href="/blog/tags/#final-project" class="post-tag">Final Project</a>
    
    <a href="/blog/tags/#camp" class="post-tag">Camp</a>
    
    

    <article>
      <p>After using PCA for two practice datasets, one of which the professor provided and one that I found by myself, our group decided to move onto the dataset that we needed to analyze for the final project. As introduced and explained on the previous posts regarding the final project, we needed to analyze the human microbiome dataset using PCA. But before getting into the code, let’s first take a look at the informative aspects of the project.</p>
<h2> Abstract </h2>
<p>Microbiomes, microscopic communities of bacteria in a particular environment, exist all over the human body and are responsible for carrying out numerous essential biological functions, both good and bad. In fact, bacteria living on the human body outnumber human cells 10 to 1. Despite their tremendous importance, microbiomes are difficult for researchers to study and understand due to their complexity and minuscule scale. Our paper examines data from The Human Microbiome Project, which contains 2,913 individual samples gathered from 242 human subjects, measuring 43,144 variables. Using principal component analysis (PCA) to reduce our multi-dimensional data, we are able to compare the clustering of microbes on various regions of the body. By examining the bacterial composition of these samples and applying PCA, we classified the samples according to the region of the body from which the sample was gathered. By plotting the data points onto the principal component axes and analyzing the linear clustering of the data, we were able to conclude that different parts of the body contain different types of bacteria.</p>
<h2> Question </h2>
<p>Utilizing Principal Component Analysis, in what ways can we classify the human microbiome?</p>
<h2> Variables and Hypothesis </h2>
<p>The independent variables were the gender and regions from which the samples were taken.
The dependent variables were the 43,144 different OTUs that were present in the various microbiomes. We hypothesize that PCA will produce clearly distinguishable clusters for each of the regions and genders from which the sample was taken. The Principal Components will be useful for explaining differences in the OTUs present in each microbiome.</p>
<h2> Background </h2>
<h5> Human Microbiome Project </h5>
<p>The <a href="https://www.hmpdacc.org/hmp/overview/">Human Microbiome Project</a> has the mission of generating resources that would enable the comprehensive characterization of the human microbiome and analysis of its role in human health and disease. The data analyzed for this investigation was sourced from the Human Microbiome Project The data set was then checked for mislabeling and sample contamination. We used the variable region 1-3 (V13) OTU table for our analysis.</p>
<h5> Human Microbiome </h5>
<p>Microbiomes are communities of bacteria, viruses, fungi, and other microbial organisms that exist all over the bodies of every eukaryotic organism. The specific microbiomes present on the human body are responsible for vital functions such as food digestion, producing vitamins, and recognizing malicious microbes. Disruption or unbalance of microbiomes can cause many health problems, such as cancer, diabetes, obesity, and autoimmune disease. According to the Human Microbiome Project, current research has shown that microbiome research holds the possibility to understand and even treat numerous human maladies. Our research focuses on classifying samples of different microbiomes present in different regions of the human body.</p>

<p>In analyzing the differences between microbiomes present on different regions of the human body, we look at the microbes present in the microbiome sample. Since the technology for sequencing DNA and analyzing the microbiome is relatively young, a traditional system of classifying microbes into species doesn’t exist. Thus, the different varieties of microbes are classified into Operational Taxonomic Units (OTUs). Our data examines the specific OTUs found in each of the samples drawn from different regions of the human body.</p>
<h5> Principal Component Analysis (PCA) </h5>
<p>Principal Component Analysis (PCA) is a statistical tool used to reduce the dimensionality of multi-variable data. Because we are unable to visualize data in more than 3 dimensions, PCA must be used to reduce the number of variables/dimensions for effective visualization and classification.</p>

<p>To do this, PCA takes a matrix of size n by m, where n represents the number of samples taken and m represents the number of measurements, and reduces the data into i vectors, or “principal components,” which can be used to project the original data onto new axes.
<img src="/public/img/before.png" alt="Image" />
As shown in the picture above, PCA takes a dataset and creates two axes named principal components 1 and 2 so that it presents the data on the left with the most variance as shown on the graph on the right.</p>
<iframe src="https://drive.google.com/file/d/1jg4YdPflTm-SYvvhZLsoEIU6ZVoKJmRL/preview" width="640" height="480"></iframe>

    <article>
    <div class="post-more">
      
      <a href="/summer%20camp/2018/07/29/Final-Project-Using-PCA/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/summer%20camp/2018/07/29/Final-Project-Using-PCA/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/summer%20camp/2018/07/26/Second-Pracitce-Using-PCA/">
        Using Principal Component Analysis (PCA) Practice Number Two:Cars Dataset
      </a>
    </h1>

    <span class="post-date">26 Jul 2018</span>
     | 
    
    <a href="/blog/tags/#cosmos" class="post-tag">COSMOS</a>
    
    <a href="/blog/tags/#final-project" class="post-tag">Final Project</a>
    
    <a href="/blog/tags/#camp" class="post-tag">Camp</a>
    
    

    <article>
      <p>After implementing PCA to the famous Iris dataset, I decided that I utilize PCA on one more dataset and then move onto the final project’s dataset. So this time, I decided to find my own dataset in which I would analyze using PCA so that I don’t have any external sources to refer to. After looking through various websites, I managed to find a very interesting dataset which was relating then different types of cars and trucks with many other variables. I accessed <a href="http://ww2.amstat.org/publications/jse/datasets/04cars.dat.txt">here</a> to get the actual dataset as I downloaded this text file as an excel and also went <a href="http://ww2.amstat.org/publications/jse/datasets/04cars.txt">here</a> to get the information of what each column stood for.
<img src="/public/img/variable.png" alt="Image" />
<img src="/public/img/cars.png" alt="Image" />
As one can see on these two pictures above, the first one shows the description of each the columns’ variables and the second picture actually shows a glimpse of the dataset I was going to analyze. So the goal of my PCA was to determine how we can classify the different types of vehicles (sports car, sports utility vehicle, wagon, etc.).</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>    
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>
<span class="k">def</span> <span class="nf">analysis</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">df</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
    <span class="n">stri</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">stri</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'principal component '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">principalComponents</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">principalDf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">principalComponents</span>
             <span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="n">stri</span><span class="p">)</span>
    <span class="n">finalDf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">principalDf</span><span class="p">,</span> <span class="n">df</span><span class="p">[[</span><span class="s">'Type'</span><span class="p">]]],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">finalDf_1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">principalDf</span><span class="p">,</span> <span class="n">df</span><span class="p">[[</span><span class="s">'Drive'</span><span class="p">]]],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'2 component PCA'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
            <span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Sports Car"</span><span class="p">,</span><span class="s">"Sport Utility Vehicle"</span><span class="p">,</span><span class="s">"Wagon"</span><span class="p">,</span><span class="s">"Minivan"</span><span class="p">,</span><span class="s">"Pickup"</span><span class="p">,</span><span class="s">"Unclassified"</span><span class="p">]</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">'r'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'m'</span><span class="p">,</span><span class="s">'y'</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span><span class="n">colors</span><span class="p">):</span>
                <span class="n">indicesToKeep</span> <span class="o">=</span> <span class="n">finalDf</span><span class="p">[</span><span class="s">'Type'</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">finalDf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                           <span class="p">,</span> <span class="n">finalDf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
                           <span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span>
                           <span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'2 component PCA'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
            <span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="s">"All-Wheel Drive"</span><span class="p">,</span><span class="s">"Rear-Wheel Drive"</span><span class="p">,</span><span class="s">"Unclassified"</span><span class="p">]</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">'r'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span><span class="n">colors</span><span class="p">):</span>
                <span class="n">indicesToKeep</span> <span class="o">=</span> <span class="n">finalDf_1</span><span class="p">[</span><span class="s">'Drive'</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">finalDf_1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                           <span class="p">,</span> <span class="n">finalDf_1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
                           <span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span>
                           <span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">"cars.xlsx"</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">"Sports Car"</span><span class="p">,</span><span class="s">"Sport Utility Vehicle"</span><span class="p">,</span><span class="s">"Wagon"</span><span class="p">,</span><span class="s">"Minivan"</span><span class="p">,</span><span class="s">"Pickup"</span><span class="p">,</span><span class="s">"All-Wheel Drive"</span><span class="p">,</span><span class="s">"Rear-Wheel Drive"</span><span class="p">,</span><span class="s">"Suggested Retail Price"</span><span class="p">,</span><span class="s">"Dealer Cost"</span><span class="p">,</span><span class="s">"Engine Size"</span><span class="p">,</span><span class="s">"Number of Cylinders"</span><span class="p">,</span><span class="s">"Horsepower"</span><span class="p">,</span><span class="s">"City Miles Per Gallon"</span><span class="p">,</span><span class="s">"Highway Miles Per Gallon"</span><span class="p">,</span><span class="s">"Weight"</span><span class="p">,</span><span class="s">"Wheel Base"</span><span class="p">,</span><span class="s">"Length"</span><span class="p">,</span><span class="s">"Width"</span><span class="p">]</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Sports Car"</span><span class="p">,</span><span class="s">"Sport Utility Vehicle"</span><span class="p">,</span><span class="s">"Wagon"</span><span class="p">,</span><span class="s">"Minivan"</span><span class="p">,</span><span class="s">"Pickup"</span><span class="p">]</span>
<span class="n">drive</span> <span class="o">=</span> <span class="p">[</span><span class="s">"All-Wheel Drive"</span><span class="p">,</span><span class="s">"Rear-Wheel Drive"</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="o">!=</span> <span class="s">"*"</span><span class="p">)</span><span class="o">.</span><span class="nb">all</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">'Type'</span><span class="p">]</span><span class="o">=</span><span class="s">"Unclassified"</span>
<span class="n">df</span><span class="p">[</span><span class="s">'Drive'</span><span class="p">]</span><span class="o">=</span><span class="s">"Unclassified"</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">387</span><span class="p">):</span>
        <span class="k">if</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">j</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">df</span><span class="p">[</span><span class="s">'Type'</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">drive</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">387</span><span class="p">):</span>
        <span class="k">if</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">drive</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">j</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">df</span><span class="p">[</span><span class="s">'Drive'</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">drive</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">17</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="n">analysis</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="n">df</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>This is the basic code I coded in order to perform an effective PCA comparing each of the first n principal components with one another so that I can observe any clustering of each of the types of vehicles. So now let’s take a closer look at each part of the code.</p>
<h3> Importing Libraries </h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>    
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>To start the code, I imported the necessary libraries needed to perform the PCA. So I imported 4 main libraries: pandas, numpy, matplotlib, and sklearn. Pandas is mainly used to organize data structures so that one can view certain data in various persepctives. Numpy is mainly used for any type of calculations or math related since it can perform basically any types of mathematical functions. Matplotlib is mainly used to visualize a certain dataset so that one can physically see the results of a certain situation. Finally, I imported the StandardScaler and the PCA from sklearn.decomposition because these are the necessary components of PCA humans cannot physically do by hand yet only computers can handle.</p>
<h3> Loading the Dataset </h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">"cars.xlsx"</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">"Sports Car"</span><span class="p">,</span><span class="s">"Sport Utility Vehicle"</span><span class="p">,</span><span class="s">"Wagon"</span><span class="p">,</span><span class="s">"Minivan"</span><span class="p">,</span><span class="s">"Pickup"</span><span class="p">,</span><span class="s">"All-Wheel Drive"</span><span class="p">,</span><span class="s">"Rear-Wheel Drive"</span><span class="p">,</span><span class="s">"Suggested Retail Price"</span><span class="p">,</span><span class="s">"Dealer Cost"</span><span class="p">,</span><span class="s">"Engine Size"</span><span class="p">,</span><span class="s">"Number of Cylinders"</span><span class="p">,</span><span class="s">"Horsepower"</span><span class="p">,</span><span class="s">"City Miles Per Gallon"</span><span class="p">,</span><span class="s">"Highway Miles Per Gallon"</span><span class="p">,</span><span class="s">"Weight"</span><span class="p">,</span><span class="s">"Wheel Base"</span><span class="p">,</span><span class="s">"Length"</span><span class="p">,</span><span class="s">"Width"</span><span class="p">]</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Sports Car"</span><span class="p">,</span><span class="s">"Sport Utility Vehicle"</span><span class="p">,</span><span class="s">"Wagon"</span><span class="p">,</span><span class="s">"Minivan"</span><span class="p">,</span><span class="s">"Pickup"</span><span class="p">]</span>
<span class="n">drive</span> <span class="o">=</span> <span class="p">[</span><span class="s">"All-Wheel Drive"</span><span class="p">,</span><span class="s">"Rear-Wheel Drive"</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The next part of the code involves loading and processing the dataset so that I input the appropriate dataframe to the PCA Solver I will later be explaining. To start off, from <a href="http://ww2.amstat.org/publications/jse/datasets/04cars.dat.txt">here</a>, I downloaded the website as a text file in which I imported the text file into an excel sheet. In my case, I named the sheet cars which is why the first line contains cars.xlsx. Also, during this process, I deleted the first column of the original dataset which contained the actual names of each vehicle which I concluded was insignificant to the overall PCA. I also set the header=None because as shown on the pictures before, the dataset’s column names aren’t really contained in the actual dataset in which I manually inputted the names of columns in the next line.</p>
<p>
The next part of the code contains me creating two lists (names and drive) in which the list 'names' contained the column names of columns 0-4 and the list 'drive' contained the column names of columns 5 and 6. I did this because this way, I could do PCA in two different ways in which the first way was to categorize it based on what type of vehicle it was and the second way being categorizing based on the vehicles' drivetrain.</p>
<h3>Processing the Dataset</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="o">!=</span> <span class="s">"*"</span><span class="p">)</span><span class="o">.</span><span class="nb">all</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">'Type'</span><span class="p">]</span><span class="o">=</span><span class="s">"Unclassified"</span>
<span class="n">df</span><span class="p">[</span><span class="s">'Drive'</span><span class="p">]</span><span class="o">=</span><span class="s">"Unclassified"</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">387</span><span class="p">):</span>
        <span class="k">if</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">j</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">df</span><span class="p">[</span><span class="s">'Type'</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">drive</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">387</span><span class="p">):</span>
        <span class="k">if</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">drive</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">j</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">df</span><span class="p">[</span><span class="s">'Drive'</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">drive</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">17</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>Moving on, the next part of the code deals with processing the cars dataset.
<img src="/public/img/example.png" alt="Image" />
As one goes through the cars dataset, there are various data points in which certain components are marked with the “<code class="highlighter-rouge">*</code>” as shown in the picture above as this signifies that the data for that certain car wasn’t available. Concluding that I would rather get rid of the entire data point, the first line of the code does this function. In that for all rows that contain “<code class="highlighter-rouge">*</code>”, I dropped the entire row and also reset the index. I also created two new columns for the two new lists I created beforehand and assigned a default value of ‘Unclassified’. I did this because there were cars that couldn’t be classified in either of the ways I specified in which I would create another category called ‘Unclassified’.</p>
<p>The next part of the code involves using nested for loops in which I utilized them to assign the values in columns Type and Drive. I did this by first running through all types of cars, and then all the rows. Since the type of car was marked in a form of 0's and 1's in which 1 signaled that it was that specific car/drivetrain. So by using an if statement for such situation, I was able to assigned the values for both of the new lists I created. After running through all the nested for loops, I created the dataframe I would put in my PCA solver in which contained the values of all the changes I made to the original dataset.</p>
<h3> Creating the PCA Solver Function </h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">analysis</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">df</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
    <span class="n">stri</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">stri</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'principal component '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">principalComponents</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">principalDf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">principalComponents</span>
             <span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="n">stri</span><span class="p">)</span>
    <span class="n">finalDf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">principalDf</span><span class="p">,</span> <span class="n">df</span><span class="p">[[</span><span class="s">'Type'</span><span class="p">]]],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">finalDf_1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">principalDf</span><span class="p">,</span> <span class="n">df</span><span class="p">[[</span><span class="s">'Drive'</span><span class="p">]]],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'2 component PCA'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
            <span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Sports Car"</span><span class="p">,</span><span class="s">"Sport Utility Vehicle"</span><span class="p">,</span><span class="s">"Wagon"</span><span class="p">,</span><span class="s">"Minivan"</span><span class="p">,</span><span class="s">"Pickup"</span><span class="p">,</span><span class="s">"Unclassified"</span><span class="p">]</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">'r'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'m'</span><span class="p">,</span><span class="s">'y'</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span><span class="n">colors</span><span class="p">):</span>
                <span class="n">indicesToKeep</span> <span class="o">=</span> <span class="n">finalDf</span><span class="p">[</span><span class="s">'Type'</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">finalDf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                           <span class="p">,</span> <span class="n">finalDf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
                           <span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span>
                           <span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'2 component PCA'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
            <span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="s">"All-Wheel Drive"</span><span class="p">,</span><span class="s">"Rear-Wheel Drive"</span><span class="p">,</span><span class="s">"Unclassified"</span><span class="p">]</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">'r'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span><span class="n">colors</span><span class="p">):</span>
                <span class="n">indicesToKeep</span> <span class="o">=</span> <span class="n">finalDf_1</span><span class="p">[</span><span class="s">'Drive'</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">finalDf_1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                           <span class="p">,</span> <span class="n">finalDf_1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
                           <span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span>
                           <span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>The PCA Solver Function I created here is similar to that of the one I made for the Iris Dataset. You can refer <a href="https://elliotk19.github.io/summer%20camp/2018/07/22/Practice-Using-PCA/">here</a> on the explanation of the basic components of the PCA Solver. In terms of the standardizing part, the cars dataset’s variables did not really have similar units of measurements which makes standardizing a necessary part of the algorithm. In this specific function, I created two finaldfs in which one was used for categorizing the different vehicles and the other for the different drive trains. By concatenating the necessary columns with each dataframe, I was able to generate the necessary plots that allowed us to effectively categorize each of the vehicles and their specific drivetrains.</p>
<h3> Analyzing the Results </h3>
<p><img src="/public/img/vehicle.png" alt="Image" />
<img src="/public/img/drivetrain.png" alt="Image" />
These graphs shown above occurs when we generate the first two principal components of the cars dataset. The top one is for the vehicle type while the second graph is for the specific drivetrain. As shown by the clustering of each of the colors for the first graph, PCA allowed us to conclude that there are relationships amongst the variables as they follow strong general trends. So when an unknown datapoint is given regarding the different variables, with the PCA and the graph it generated we can identify what kind of flower the unknown sample is. However when talking about the PCA for the drivetrain, I did’t really notice distinct clustering between the colors. Therefore I concluded that there’s not much of a direct relationship between the variables regarding the drivetrains.</p>

    <article>
    <div class="post-more">
      
      <a href="/summer%20camp/2018/07/26/Second-Pracitce-Using-PCA/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/summer%20camp/2018/07/26/Second-Pracitce-Using-PCA/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/summer%20camp/2018/07/22/Practice-Using-PCA/">
        Using Principal Component Analysis (PCA) Practice Number One:Iris Dataset
      </a>
    </h1>

    <span class="post-date">22 Jul 2018</span>
     | 
    
    <a href="/blog/tags/#cosmos" class="post-tag">COSMOS</a>
    
    <a href="/blog/tags/#final-project" class="post-tag">Final Project</a>
    
    <a href="/blog/tags/#camp" class="post-tag">Camp</a>
    
    

    <article>
      <p>Before directly stepping to the dataset of the human microbiomes, our professor recommended implementing PCA on various example datasets one or two times. The first dataset he provided us data of the three different species of the plant <i>Iris</i> : <i>Iris Setosa, Iris Versicolour , </i>and <i>Iris Virginica.</i> More information about the dataset can be found <a href="https://archive.ics.uci.edu/ml/datasets/Iris">here</a> To basically sum it up, the three classes in the Iris dataset are Iris-setosa (n=50) Iris-versicolor (n=50) Iris-virginica (n=50) and the four features are sepal length(cm), sepal width(cm), petal length(cm), and petal width(cm).</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>    
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>
<span class="k">def</span> <span class="nf">analysis</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">df</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
    <span class="n">stri</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">stri</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'principal component '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">principalComponents</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">principalDf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">principalComponents</span>
             <span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="n">stri</span><span class="p">)</span>
    <span class="n">finalDf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">principalDf</span><span class="p">,</span> <span class="n">df</span><span class="p">[[</span><span class="s">'class'</span><span class="p">]]],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'2 component PCA'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
            <span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Iris-setosa'</span><span class="p">,</span> <span class="s">'Iris-versicolor'</span><span class="p">,</span> <span class="s">'Iris-virginica'</span><span class="p">]</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">'r'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span><span class="n">colors</span><span class="p">):</span>
                <span class="n">indicesToKeep</span> <span class="o">=</span> <span class="n">finalDf</span><span class="p">[</span><span class="s">'class'</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">finalDf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                           <span class="p">,</span> <span class="n">finalDf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
                           <span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span>
                           <span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="n">filepath_or_buffer</span><span class="o">=</span><span class="s">'https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data'</span><span class="p">,</span>
<span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
<span class="n">sep</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'sepal_len'</span><span class="p">,</span> <span class="s">'sepal_wid'</span><span class="p">,</span> <span class="s">'petal_len'</span><span class="p">,</span> <span class="s">'petal_wid'</span><span class="p">,</span> <span class="s">'class'</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s">"all"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>            
<span class="n">analysis</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="n">df</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>                             
</pre></td></tr></tbody></table></code></pre></div></div>
<p>This is the basic code I coded in order to perform an effective PCA comparing each of the first n principal components with one another so that I can observe any clustering of each of the Iris petals. So now let’s take a closer look at each part of the code.</p>
<h3> Importing Libraries </h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>    
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>To start the code, I imported the necessary libraries needed to perform the PCA. So I imported 4 main libraries: pandas, numpy, matplotlib, and sklearn. Pandas is mainly used to organize data structures so that one can view certain data in various persepctives. Numpy is mainly used for any type of calculations or math related since it can perform basically any types of mathematical functions. Matplotlib is mainly used to visualize a certain dataset so that one can physically see the results of a certain situation. Finally, I imported the StandardScaler and the PCA from sklearn.decomposition because these are the necessary components of PCA humans cannot physically do by hand yet only computers can handle.</p>
<h3> Loading the Dataset </h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="n">filepath_or_buffer</span><span class="o">=</span><span class="s">'https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data'</span><span class="p">,</span>
<span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>The next part of the code is actually loading the dataset into a pandas dataframe so that I could easily organize, drop, or add certain rows/columns. First I created a pandas dataframe that read the csv file from the given filepath. One can see two more parameters that are part of the pd.read_csv function which are ‘header’ and ‘sep’. I specifically set the header=None because if you didn’t put anything in there, it is set default to header=0 meaning that the first row would automatically set as the header of the dataset. However, one can see from the image below that the specific dataset doesn’t really contain a specific row for header so we have to set the header to nothing and later make adjustments to it. The next parameter, sep or separate, as one can also see in the image below that all the data is separated by a comma so by putting sep=’,’ the computer knows that a comma signifies the next data.
<img src="/public/img/comma.png" alt="Image" /></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'sepal_len'</span><span class="p">,</span> <span class="s">'sepal_wid'</span><span class="p">,</span> <span class="s">'petal_len'</span><span class="p">,</span> <span class="s">'petal_wid'</span><span class="p">,</span> <span class="s">'class'</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s">"all"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>        
</pre></td></tr></tbody></table></code></pre></div></div>
<p>After loading the data in to a pandas dataframe, since I set the header as None, I have to identify the names of the columns in which I did in line 1. The next line of the code is very important in data science which is dealing with rows/columns that contain an extraneous/erroneous value which has a possibility to mess up the whole process. So by executing the second line, I dropped all the rows that contained no information at all so that all rows will have all parts of the data.
<img src="/public/img/iris.png" alt="Image" />
The next two lines allow the array x to have stored the data in a form of a 150×4 matrix where the columns are the different features, and every row represents a separate flower sample. Each sample row x can be pictured as a 4-dimensional vector as shown by the picture above. Since the last column with the class only has string values, it will later be used for plotting purposes.</p>
<h3> Creating the PCA Solver Function </h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">analysis</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">df</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
    <span class="n">stri</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">stri</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'principal component '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">principalComponents</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">principalDf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">principalComponents</span>
             <span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="n">stri</span><span class="p">)</span>
    <span class="n">finalDf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">principalDf</span><span class="p">,</span> <span class="n">df</span><span class="p">[[</span><span class="s">'class'</span><span class="p">]]],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>    
</pre></td></tr></tbody></table></code></pre></div></div>
<p>The next part of the program involves creating the PCA solver that inputs 3 parameters: n- the number of principal components it will compare, df- the raw dataset, and x-the dataset with only the measurements. The first line of the function utilizes the standardizing function in which dataframe x gets standardized. Whether to standardize the data prior to a PCA on the covariance matrix depends on the measurement scales of the original features. Since PCA yields a feature subspace that maximizes the variance along the axes, it makes sense to standardize the data, especially, if it was measured on different scales. Although, all features in the Iris dataset were measured in centimeters, let us continue with the transformation of the data onto unit scale (mean=0 and variance=1), which is a requirement for the optimal performance of many machine learning algorithms. After standardizing, I used to PCA function by giving the correct number of principal components I was trying to compare. There’s also a for loop that runs in the range n which is used for the titling each of the axes when graphing the principal components against one another. So after running through all the PCA functions, I created a finalDf that combined the principalDf that contained the principal components with the list df[‘class’] or the y dataframe we created at the start so that we know which type of flower each data represents.</p>
<h3> Creating the PCA Solver Function (Graphing part) </h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'2 component PCA'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
        <span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Iris-setosa'</span><span class="p">,</span> <span class="s">'Iris-versicolor'</span><span class="p">,</span> <span class="s">'Iris-virginica'</span><span class="p">]</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">'r'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span><span class="n">colors</span><span class="p">):</span>
            <span class="n">indicesToKeep</span> <span class="o">=</span> <span class="n">finalDf</span><span class="p">[</span><span class="s">'class'</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">finalDf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                       <span class="p">,</span> <span class="n">finalDf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">indicesToKeep</span><span class="p">,</span> <span class="n">stri</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
                       <span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span>
                       <span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>This set of code is still part of the PCA Solver function but only includes the graphing. Talking about the basic structure, I created a nested for loop so that I would compare each of the principal components with one another so we can see the correlation amongst each of the princpal components. In the for loops, I set the figsize as shown, labelled each of the axes using the stri array that contained the axes titles. I also created two more lists: a targets array that included the names of each flower, and a colors array which included the colors of each of the points on the graph. Making both arrays, I created scatter plot in which plotted each of the principal components with each flower being labelled by a different color.</p>
<h3> Analyzing the Results </h3>
<p><img src="/public/img/iris.png" alt="Image" />
This is the graph when setting n as two as we compare the first two principal components of the Iris dataset. As shown by the clustering of each of the colors(or the flowers) PCA allowed us to conclude that there are relationships amongst the variables as they follow strong general trends. So when an unknown datapoint is given regarding the different variables, with the PCA and the graph it generated we can identify what kind of flower the unknown sample is.</p>

    <article>
    <div class="post-more">
      
      <a href="/summer%20camp/2018/07/22/Practice-Using-PCA/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/summer%20camp/2018/07/22/Practice-Using-PCA/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/summer%20camp/2018/07/19/Final-Project-Preparation-Day-1/">
        Introduction to Principal Component Analysis (PCA)
      </a>
    </h1>

    <span class="post-date">19 Jul 2018</span>
     | 
    
    <a href="/blog/tags/#cosmos" class="post-tag">COSMOS</a>
    
    <a href="/blog/tags/#final-project" class="post-tag">Final Project</a>
    
    <a href="/blog/tags/#camp" class="post-tag">Camp</a>
    
    

    <article>
      <p>In our final project, our professor required us to learn and apply a statistical tool called PCA or Principal Component Analysis in the datasets we received. In short, PCA is used to reduce the dimensionality of multi-variable data as it is very applicable when there are many variables or features present. The advantages of the usage of PCA is that it helps identify how data is related/unrelated and does not require previous assumptions about measurements.
<img src="/public/img/pca.png" alt="Image" />
The image shown above shows the basic steps that are required in a principal component analysis in which involves the gathering of raw data, plotting a correlation/covariance matrix, converting the matrices to eigenvalues and eigenvectors, and lastly projecting those onto the principal component axes. The dataset we received of the human microbiomes consists of 2,913 individual samples gathered from 242 human subjects, measuring approximately 43,000 variables. To physically plot each variable along the xy axis is practically an impossible task, but PCA allows one to reduce the number of variables/features to the main principal components (have the most variance amongst data) for the effective visualization of the data.
<img src="/public/img/r.png" alt="Image" />
To describe the whole process, after one gets the raw dataset, to create a correlation matrix, he/she has to use the equation shown in the image above to make a matrix made of all the r values calculated.
<img src="/public/img/eigen.png" alt="Image" />
With the correlation matrix, he/she can use the relationship shown in the image above regarding the eigenvalues and eigenvectors. To describe the relationship in short, when multiplying the correlation matrix with an eigenvector, it would result in its eigenvalue multiplied by the same eigenvector. Since we’ve already identified how the eigenvalue with the highest magnitude would signify the most variance amongst the variance, using matrix algebra, one can mathematically calculate the eigenvalues and its respective eigenvectors. This overall process is very effective in reducing the dataset since after identifying all the eigenvalues and eigenvectors, we can see how significant each eigenvalue is by dividing the eigenvalue by the total sum of all the eigenvalues. Thus the eigenvalue with the highest ratio would be the main principal component therefore allows the plotting of the data with the most variance. The next and final process of PCA, which is to project these values onto an axes containing the main principal components, cannot really be done by hand as this process a computer must do for you.</p>

    <article>
    <div class="post-more">
      
      <a href="/summer%20camp/2018/07/19/Final-Project-Preparation-Day-1/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/summer%20camp/2018/07/19/Final-Project-Preparation-Day-1/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-106931699-1', 'auto');
ga('send', 'pageview');
    </script>
    
  </body>
  
  <script id="dsq-count-scr" src="//elliot.disqus.com/count.js" async></script>
  
</html>
